***************
*** 64,72 ****
   *       may change along with the backend HTTP client.
   */
  function request_queue_worker($job) {
-   // @todo filter options to appropriate keys for drupal_http_request options.
-   // @todo add more defaults to options
-   $options = $job['options'];
  
    $options += array(
      // default timeout of 5 seconds - relatively short so processes don't hang,
--- 64,71 ----
   *       may change along with the backend HTTP client.
   */
  function request_queue_worker($job) {
+   $valid_options = array_fill_keys(array('headers', 'method', 'data', 'max_redirects', 'timeout', 'context'), 0);
+   $options = array_intersect_key($job['options'], $valid_options);
  
    $options += array(
      // default timeout of 5 seconds - relatively short so processes don't hang,
***************
*** 76,82 ****
    $response = drupal_http_request($job['url'], $options);
  
    if ($response->code != 200) {
-     watchdog('request_queue', 'Requestqueue call returned non-200 status: %response', array('%response' => print_r($response, true)), WATCHDOG_ERROR);
    }
  }
  
--- 75,81 ----
    $response = drupal_http_request($job['url'], $options);
  
    if ($response->code != 200) {
+     watchdog('request_queue', 'request_queue call returned non-200 status: %response', array('%response' => print_r($response, true)), WATCHDOG_ERROR);
    }
  }
  
